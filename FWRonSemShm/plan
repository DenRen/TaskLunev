Простой случай:
        Есть один W и один R. Они оба знают shmid. И только они про него знают. В начале этой памяти есть semID,
    благодаря которому они будут синхронизироваться. Идея в том, чтобы реализовать обычную задачу производителя-
    потребителя, но ещё в проверкой на время. Т.е. вместо того, чтобы использовать semop, использовать semtimedop.
    И если, например, проходит 5 секунд, то тот, кто ждал чекает раздеяемую память на кол-во участников, если оно не два,
    то другого убили, тогда делаем semctl (semID, 0, IPC_RMID) и завершаемся. Если участников два, то просто передача
    долгая или через FIFO.
        Если много W и R, то через ftok (connFileName) делаем общую разд. память, в которой есть семафоры, которые тоже
    создаются при помощи ftok (connFileName) (ошибки не будет, т.к. на выходе будут одни и те же shmid semID). Через
    семафоры и разд. память реализовываем задачу производителя-потребителя (Тоже с проверками на время, скорее всего),
    в которой передаётся shmid. А потом возвращаемся к первому пункту.